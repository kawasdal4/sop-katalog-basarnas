# Cloudflare Worker: R2 â†” OneDrive Bridge
# This worker handles file editing via Microsoft 365 integration

name = "r2-onedrive-bridge"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# R2 Bucket binding
[[r2_buckets]]
binding = "MY_BUCKET"
bucket_name = "sop-katalog-basarnas"

# Environment variables (set via wrangler secret)
# wrangler secret put CLIENT_ID
# wrangler secret put CLIENT_SECRET  
# wrangler secret put TENANT_ID
# wrangler secret put WEBHOOK_VALIDATION_TOKEN

# Dev settings
[dev]
port = 8787
local_protocol = "http"

# Production settings
[env.production]
name = "r2-onedrive-bridge-prod"
route = "https://r2-bridge.basarnas.go.id/*"

# Environment variables for production
[env.production.vars]
EDIT_FOLDER = "R2-Edit-Temp"
R2_BUCKET_NAME = "sop-katalog-basarnas"
